# TrackEditor

エディタ拡張でTimeline的なトラック編集を行うためのフレームワークです。

要素を定義することで、GUIで編集し、アセットを出力(TrackAsset)することが出来ます。

サンプルではGameObjectにTrackAssetを保存し、再生時にTrackAssetPlayerで再生が可能です。

![エディタ画面](Images/TrackEditor.png "エディタ画面")


## 要素の追加方法

要素の追加はアセット用の定義（AssetTrack,AssetElement）とエディター用の定義（EditorTrack,EditorElement）、再生用の定義（PlayerTrack,PlayerElement）が必要です。

これらのトラックとエレメントを準備したあと、TrackEditorGenerator.csに使用したいトラックとエレメントを定義し、コード生成を行うとシリアライズやマッピングが追加されて使用可能になります。

なお、コード生成はソースコードにエラーが有ると実行出来なくなります。

特にコード生成の結果コンパイルエラーが起きると、まずエラーを解消しないことには再生成が出来ないため、コード生成を実行する前にSVNやGitなどで保存しておき、生成結果に問題があったら元に戻せるようにしておくと良いです。


## データ構造

Trackには一番上のRootトラック、その次のメイントラック、その次のサブトラックの3階層があります。

基本的にはエレメントはサブトラックに含まれますが、実装によってはメイントラックにエレメントを持たせることも可能です。




